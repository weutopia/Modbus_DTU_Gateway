# Modbus_DTU_Gateway

# 第一阶段：读取ModbusRTU协议的空调面板信息

>已知注意事项：
>1.江森T7600寄存器为16位，即访问一个寄存器最大可返回0xFF 0xFF
>2.对于 温度/Model模式 这类具体数字，访问一个寄存器返回0xFF 0xFF（16位全部返回）
>3.对于Bool值表征状态的，访问一个寄存器返回0xFF（仅仅返回寄存器的低8位）
>4.部分功能码没有开放，继电器无法控制
>5.Adress地址若给2，则寄存器起始地址00 01（即减1）
>6.手册勘误：温度设定不能低于5℃
>7.温度设定*10，读取/10

已经实现读取/预置面板信息，由于寄存器写操作只开放了16功能码，只能写入部分面板信息

# 第二阶段：决定开发方向
1.使用ModbusRTU转TCP设备 + 设备厂家的云平台——成本：100 + 云平台流量费用，开发速度较快

<img src="https://img.alicdn.com/imgextra/https://img.alicdn.com/imgextra/i1/3159274970/O1CN01ClvJYT1maJ9MlmnKq_!!3159274970.png_430x430q90.jpg" style="zoom: 50%;" />



2.使用嵌入式Linux开发板作网关，内网web控制——成本：600~800，开发速度较慢

<img src="https://gd1.alicdn.com/imgextra/i2/880983124/O1CN01Xx0k731YwpzsaVigi_!!880983124.jpg" style="zoom: 25%;" />

3.使用RTOS单片机作网关，外网web控制——成本：100~200，开发速度较慢

<img src="https://img.alicdn.com/imgextra/i1/4160407286/O1CN01gFgjSP23h2MNbII1t_!!4160407286.png_430x430q90.jpg" style="zoom: 50%;" />

## 最终选型第1类方案

选定有人物联网的W610系列做透传服务器

优点：有人云提高成熟的后端服务，且完全免费，提高了完善的API和SDK，方便和web上位机对接

# 第三阶段：选型与成本评估

选定有人物联网的W610系列做透传服务器

优点：有人云提高成熟的后端服务，且完全免费，提高了完善的API和SDK，方便和web上位机对接

成本：网关：有人物联网W610 -----------188 元/个

​           数据服务器  --------------------------- 0 （有人云/免费）

​           上位机         ---------------------------- 自行开发

# 第四阶段：开发上位机

网关选取：选定有人物联网的W610系列做透传服务器

后端服务器：有人云

前端/上位机：使用vue.js开发

当前开发进度：

+ 已开发

>1.登录功能
>
>2.用户指引
>
>3.网关和从机（空调面板）监视参数功能



+ 目前正在开发

  >4.向设备发送操作指令



+ 后续开发功能

  > 5.报警器功能：设备数值超过某一临界值，向用户报警
  >
  > 6.数据曲线站视功能（面板展示使用）


